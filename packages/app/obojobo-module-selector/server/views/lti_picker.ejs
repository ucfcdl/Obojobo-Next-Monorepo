<!DOCTYPE html>
<html lang="en">
<head>
	<%
		let assetForEnv = oboRequire('asset_resolver').assetForEnv
		let title = 'Obojobo Module Selector'
		let css = [
			assetForEnv('/static/module-selector$[.min].css')
		]

		let headerJs = [
			assetForEnv('//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'),
			assetForEnv('/module-selector/jquery-ui-1.10.3.custom.js')
		]

		let footerJs = [
			assetForEnv('/static/module-selector$[.min].js')
		]

		let fonts = ['//fonts.googleapis.com/css?family=Libre+Franklin:300,400,700']
	%>
	<%- include ../../../obojobo-express/views/partials/head %>
</head>
<body>

	<section id="section-module-selection">
		<header>
			<div class="heading-container">
				<h1>
					<span class="remaining-tagline">Embed an Obojobo&reg; Next Module</span>
				</h1>
			</div>
			<div class="flourish-line"></div>
		</header>

		<p>Choose between:</p>

		<a role="button" class="wizard-button-container personal-library-button-container">
			<div href="#" class="personal-library-button wizard-button">
				Personal<br /> Library
			</div>
			<p>
				Modules you've created.
			</p>
		</a>

		<a role="button" class="wizard-button-container community-library-button-container">
			<div href="#" class="community-library-button wizard-button">
				Community<br /> Collection
			</div>
			<p>
				Modules from others.
			</p>
		</a>

	</section>

	<section id="section-select-object">
		<div id="list-header">
			<div id="header-title">
				<a href="#" role="button" id="back-button">Back</a>
				<div id="select-section-title"></div>
			</div>
			<div id="search-controls">
				<input type="text" id="search"/>
				<a id="refresh" role="button" href="#">Refresh</a>
			</div>
			<a href="/editor" role="button" class="button" target="_blank" id="new-module">New Module</a>

			<div class="flourish-line"></div>
		</div>

		<div id="list-container">

			<ul class="template">
				<li class="template obo-item">
					<div class="buttons">
						<a role="button" class="button embed-button" href="#">Embed</a>
						<a class="preview external" target="_blank" href="#">Preview</a>
					</div>
					<div class="description">
						<h2><span class="title"></span></h2>
						<div class="draft-id"></div>
					</div>
				</li>
			</ul>

			<div class="section community-library">
				<ul></ul>
			</div>

			<div class="section my-modules">
				<ul></ul>
				<div class="no-items no-objects">
					<p>You don't have any objects. Click the button below to create an object at Obojobo, then return to this page and select your newly created instance.</p>
					<a class="button" role="button" target="_blank" href="/editor">Create a new Obojobo Next module</a>
				</div>
			</div>

		</div>

	</section>

	<section id="section-progress">
		<header>
			<div class="heading-container">
				<h1>
					<span class="remaining-tagline">Obojobo&reg; Next Learning Module Selection</span>
				</h1>
			</div>
			<div class="flourish-line"></div>
		</header>

		<div class="progress-container">
			<span>Embedding Module...</span>
			<div class="progressbar"></div>
		</div>
	</section>

	<section id="section-success">
		<header>
			<span class="logo-text">Obojobo&reg;</span>
			<div class="flourish-line"></div>
		</header>
		<div class="grey-box">
			<h1>Obojobo Instance Connected:</h1>
			<h2 class="selected-instance-title"></h2>
			<span class="note">Scores for this Obojobo assignment will sync with your Canvas gradebook</span>
		</div>
		<a href="#" class="preview-link" target="_blank">Preview this instance in a new window...</a>
	</section>

	<section id="loading"></section>
	<section id="dead"></section>

	<div id="error-window" title="Error">
		<p>
			Sorry, something went wrong. Please try again.
		</p>
	</div>

	<div id="confirm-window" title="Are you sure?">
		<p>
			Scores will no longer sync to Canvas and you will need to connect to another object.
		</p>
	</div>

	<form id="submit-form" action="" method="post" encType="application/x-www-form-urlencoded">
		<input type="hidden" name="lti_message_type" value="ContentItemSelection" />
		<input type="hidden" name="lti_version" value="LTI-1p0" />
		<input type="hidden" name="content_items" value="" />
	</form>

	<script type="text/javascript">
		window.__returnUrl = '<%= returnUrl %>';
		window.__isAssignment = <%= isAssignment ? 'true' : 'false' %>
	</script>

	<%
		if (typeof inlines !== 'undefined')
		{
			inlines.forEach(function(inline)
			{ %>
		<script><% - js %></script>
		<% })
		}
		if (typeof footerJs !== 'undefined')
		{
			footerJs.forEach(function(href) { %>
			<script src="<%= href %>"></script>
			<% })
		}
	%>
</body>
</html>
